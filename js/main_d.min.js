var player,videoElement,threshold=50,keysEnabled=!0,videoStatus={},timer,timeron=!1,noiseon=!0,DEBUG=!1,copyLink="CLICK HERE FOR MORE INFORMATION & TICKETS",defaultQuality="hd720";
function startApp(){DEBUG&&console.log("Page ready...");$("#container").append('<div id="loader"><img src="imgs/loader.gif">LOADING</div>');$(window).focus(function(){DEBUG&&console.log("Window has focus")});$(window).resize(function(){positionNoise()});$(document).keypress(function(a){console.debug(a);a=$.browser.msie?a.keyCode:a.charCode;keysEnabled?32==a&&player.nextVideo():DEBUG&&console.log("detectKey(e) :: keys are disabled at this point")});loadNoiseVideo()}
function loadNoiseVideo(){DEBUG&&console.log("loadNoiseVideo() :: Loading Noise...");var a=new Image;a.src="imgs/noise.gif";a.onload=function(){noiseLoaded(a)}}
function noiseLoaded(a){$("#container").append('<div id="video-container"></div>');$("#container").append('<div id="link-container">'+copyLink+"</div>");$("#video-container").append(a);positionNoise();$("#link-container").click(function(){player.pauseVideo();$(this).target="_blank";window.open("/r");return!1});$("#loader").remove();$("#video-container").css("opacity","1");DEBUG&&console.log("noiseLoaded() :: Noise Loaded! Loading playlist");loadPlayer()}
function loadPlayer(){DEBUG&&console.log("loadPlayer() :: Loading Player ...");$("#container").append('<div id="player"></div>');$("#player").css("opacity","0");var a=document.createElement("script");a.src="//www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}
function onPlayerReady(){DEBUG&&console.log("onPlayerReady(e) :: Calling noise and cueing playlist...",videosDesktop);$("#player").css("opacity","1");player.cuePlaylist(videosDesktop,0,0,defaultQuality);startCheck()}function onPlayerError(a){DEBUG&&console.log("onPlayerError() :: Error",a)}
function onYouTubeIframeAPIReady(){DEBUG&&console.log("onYouTubeIframeAPIReady() :: IframeAPIReady...");player=new YT.Player("player",{events:{onReady:onPlayerReady,onStateChange:onytplayerStateChange,onError:onPlayerError},playerVars:{autoplay:1,controls:0,showinfo:0,wmode:"opaque",modestbranding:1,disablekb:1,enablejsapi:1,iv_load_policy:3,origin:window.location.host,rel:0},width:"100%",height:"100%",videoId:videosDesktop[0]})}
function checkPlay(){DEBUG&&console.log("checkPlay() :: CurrentTime:",player.getCurrentTime(),"Totaltime",player.getDuration());0<player.getCurrentTime()&&player.getCurrentTime()<player.getDuration()-0.5&&hideNoise();0!=player.getCurrentTime()&&player.getCurrentTime()>player.getDuration()-0.5&&showNoise()}function showNoise(){noiseon||(DEBUG&&console.log("hidenoise() :: Noise fadein..."),$("#link-container").hide(),$("#video-container").fadeIn(),noiseon=!0)}
function hideNoise(){noiseon&&(DEBUG&&console.log("hidenoise() :: Noise fadeout..."),$("#link-container").show(),$("#video-container").fadeOut(),noiseon=!1)}function startCheck(){DEBUG&&console.log("startCheck() :: Starting Timer");timeron||(timer=setInterval("checkPlay()",300));timeron=!0}function stopCheck(){timeron&&(clearInterval(timer),timeron=!1,DEBUG&&console.log("stopCheck() :: Stopping Timer"),$("#video-container").fadeOut())}
function restartPlaylist(){DEBUG&&console.log("restartPlaylist() :: restarting playlist ...");player.playVideoAt(1);videoStatus={}}
function onytplayerStateChange(a){switch(a.data){case 0:DEBUG&&console.log("onytplayerStateChange() :: State",a.data,"End Playlist");restartPlaylist();window.focus();break;case 1:DEBUG&&(console.log("onytplayerStateChange() :: State",a.data,"Playing"),console.log("Playing........",player.getPlaylistIndex()));keysEnabled=!0;window.focus();break;case -1:DEBUG&&(console.log("onytplayerStateChange() :: State",a.data,"Unstarted"),console.log("onytplayerStateChange(): Availible:",player.getAvailableQualityLevels(),
"Decided:",player.getPlaybackQuality()));player.setPlaybackQuality(defaultQuality);showNoise();window.focus();keysEnabled=!1;break;case 2:DEBUG&&console.log("onytplayerStateChange() :: State",a.data,"Paused");window.focus();break;case 3:DEBUG&&console.log("onytplayerStateChange() :: State",a.data,"Buffering")}}
function centerElement(a){$(window).width();$(window).height();$(a).width();$(a).height();var b=$(window).width()/2-$(a).width()/2,c=$(window).height()/2-$(a).height()/2;$(a).css("top",c+"px");$(a).css("left",b+"px")}
function positionNoise(){var a=$(window).width(),b=$(window).height();a>b&&(nWidth=540*(a/540),nHeight=nWidth/1.77,nHeight>b&&(nWidth=nWidth*b/nHeight,nHeight=nWidth/1.77));a<b&&(nHeight=305*(b/305),nWidth=1.77*nHeight,nWidth>a&&(nHeight=nHeight*a/nWidth,nWidth=1.77*nHeight));var b=$("#video-container").find("img"),a=$(window).height()/2-nHeight/2,c=$(window).width()/2-nWidth/2;$(b).css("width",Math.round(nWidth)+"px");$(b).css("height",Math.round(nHeight)+"px");$("#video-container").css("top",Math.round(a)+
"px");$("#video-container").css("left",Math.round(c)+"px");b=$(window).width()/2-$("#link-container").width()/2;a=Math.round(a)+Math.round(nHeight)-50;$("#link-container").css("top",a+"px");$("#link-container").css("left",b+"px");600>$(window).width()?$("#link-container").css("opacity","0"):$("#link-container").css("opacity","1")};
