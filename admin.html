<!DOCTYPE html>
<html>
  <head>
		<title>Batb Admin</title>
		<link rel="stylesheet" type="text/css" href="css/main.css"/>
		<script src="../js/jquery-1.8.3.min.js" type="text/javascript"></script>
  </head>
	
	<body> 
		Display Videos
		<ul>
		{% for video in videos %}
			<li>{{ video.order }} {{ video.url }}</li>

		
		{% endfor %}
		</ul>
		Add Video
		<form action="/a/addvideo" id="addForm">
			<input type="text" name="order" placeholder="1" size="1"/>
			<input type="text" name="url" placeholder="Video Youtube ID" />
			<input type="submit" value="Submit" />
		</form>
		
		<script>
		
		var youtubeURL = "https://gdata.youtube.com/feeds/api/videos/"
		var formatAPI = "?v=2&alt=json";
		
		$("#addForm").submit(function(event) {
			event.preventDefault(); 
			var $form = $( this );
			var videoURL = $form.find( 'input[name="url"]' ).val();
			var order = $form.find( 'input[name="order"]' ).val();
			var url = $form.attr( 'action' );
			var fullURL = youtubeURL + videoURL + formatAPI;
			
			$.get(fullURL)
			  .success(function() { videoExists() })
			  .error(function() { videoDoesnt() })
			
			function videoExists() {
				$.post( url, { p_videourl: videoURL, p_order : order });
			}
			
			function videoDoesnt() {
				console.debug("Video Doesn't exist")
			}
			
		});
		
		</script>
		
		
  </body>
</html>